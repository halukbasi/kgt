{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StrikeWalletAdapter = exports.StrikeWalletName = void 0;\n\nconst wallet_adapter_base_1 = require(\"@solana/wallet-adapter-base\");\n\nexports.StrikeWalletName = 'Strike';\n\nclass StrikeWalletAdapter extends wallet_adapter_base_1.BaseSignerWalletAdapter {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n    this.name = exports.StrikeWalletName;\n    this.url = 'https://wallet.strikeprotocols.com';\n    this.icon = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAyODEuNSAyODQuNyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjgxLjUgMjg0Ljc7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDp1cmwoI1NWR0lEXzFfKTt9Cjwvc3R5bGU+CjxsaW5lYXJHcmFkaWVudCBpZD0iU1ZHSURfMV8iIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMjM5LjczMTIiIHkxPSIxNS43NTk3IiB4Mj0iNDIuNzkzOSIgeTI9IjI2Ny44Mjc5Ij4KCTxzdG9wICBvZmZzZXQ9IjAuMTg3OSIgc3R5bGU9InN0b3AtY29sb3I6IzVENkI4NyIvPgoJPHN0b3AgIG9mZnNldD0iMC4yNTY3IiBzdHlsZT0ic3RvcC1jb2xvcjojNjA2RDg4Ii8+Cgk8c3RvcCAgb2Zmc2V0PSIwLjMwNDYiIHN0eWxlPSJzdG9wLWNvbG9yOiM2NjcyOEMiLz4KCTxzdG9wICBvZmZzZXQ9IjAuMzQ2IiBzdHlsZT0ic3RvcC1jb2xvcjojNzI3QjkzIi8+Cgk8c3RvcCAgb2Zmc2V0PSIwLjM4MzkiIHN0eWxlPSJzdG9wLWNvbG9yOiM4Mjg5OUYiLz4KCTxzdG9wICBvZmZzZXQ9IjAuNDE5MiIgc3R5bGU9InN0b3AtY29sb3I6Izk5OURBRiIvPgoJPHN0b3AgIG9mZnNldD0iMC40NTI4IiBzdHlsZT0ic3RvcC1jb2xvcjojQjdCOUM2Ii8+Cgk8c3RvcCAgb2Zmc2V0PSIwLjQ4NDMiIHN0eWxlPSJzdG9wLWNvbG9yOiNERkRGRTUiLz4KCTxzdG9wICBvZmZzZXQ9IjAuNTAwNiIgc3R5bGU9InN0b3AtY29sb3I6I0ZGRkZGRiIvPgoJPHN0b3AgIG9mZnNldD0iMC41MjE5IiBzdHlsZT0ic3RvcC1jb2xvcjojRDJEM0RBIi8+Cgk8c3RvcCAgb2Zmc2V0PSIwLjU0MzciIHN0eWxlPSJzdG9wLWNvbG9yOiNCOEI5QzQiLz4KCTxzdG9wICBvZmZzZXQ9IjAuNTU3OCIgc3R5bGU9InN0b3AtY29sb3I6I0FGQjFCRCIvPgoJPHN0b3AgIG9mZnNldD0iMC41ODM1IiBzdHlsZT0ic3RvcC1jb2xvcjojQTFBNEIzIi8+Cgk8c3RvcCAgb2Zmc2V0PSIwLjY0MTUiIHN0eWxlPSJzdG9wLWNvbG9yOiM4ODhEQTEiLz4KCTxzdG9wICBvZmZzZXQ9IjAuNyIgc3R5bGU9InN0b3AtY29sb3I6Izc2N0Q5NSIvPgoJPHN0b3AgIG9mZnNldD0iMC43NTg1IiBzdHlsZT0ic3RvcC1jb2xvcjojNjg3MzhEIi8+Cgk8c3RvcCAgb2Zmc2V0PSIwLjgxNzEiIHN0eWxlPSJzdG9wLWNvbG9yOiM2MDZEODgiLz4KCTxzdG9wICBvZmZzZXQ9IjAuODc1OCIgc3R5bGU9InN0b3AtY29sb3I6IzVENkI4NyIvPgo8L2xpbmVhckdyYWRpZW50Pgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTQyLjUsMTExLjdjNTcuOSwzLjgsMTM5LjIsOS4xLDEzOS4xLDc3LjFjMCw3Ny41LTY3LjksOTUuOS0xNDAuOCw5NS45Yy03Mi43LTAuMi0xMzAuMS0xMC0xNDAuNC05Mi41bDAsMAoJYzYuMSwzLjUsMTQuNyw4LDE4LjksMTAuMmM0NCwyMy40LDEzMy4xLDEyLjEsMTMzLjEsMTIuMWwtMC40LDI1LjFsNTguNy00My45bC01Ny43LTQzLjlsLTAuNCwyMi4xYzAsMC05LTAuNi0xMy40LTAuOQoJQzgxLjIsMTY5LjItMC4yLDE2NCwwLDk2LjFDMCwxOC42LDY3LjksMCwxNDAuOCwwYzcyLjcsMC42LDEzMyw3LjYsMTQwLjgsOTIuNWwwLDBjLTU1LjctNDIuMS0xNTcuMS0yNS4zLTE1Ny4xLTI1LjNsMC40LTI1LjEKCUw2Ni4xLDg1LjlsNTcuNyw0My45bC0wLjMtMTkuNUMxMjMuNSwxMTAuNCwxMzQuMywxMTEuMiwxNDIuNSwxMTEuN3oiLz4KPC9zdmc+Cg==';\n    this._readyState = typeof window === 'undefined' || typeof document === 'undefined' ? wallet_adapter_base_1.WalletReadyState.Unsupported : wallet_adapter_base_1.WalletReadyState.Loadable;\n    this._connecting = false;\n    this._wallet = null;\n    this._publicKey = null;\n  }\n\n  get publicKey() {\n    return this._publicKey;\n  }\n\n  get connecting() {\n    return this._connecting;\n  }\n\n  get connected() {\n    var _a;\n\n    return !!((_a = this._wallet) === null || _a === void 0 ? void 0 : _a.isLoggedIn);\n  }\n\n  get readyState() {\n    return this._readyState;\n  }\n\n  connect() {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        if (this.connected || this.connecting) return;\n        if (this._readyState !== wallet_adapter_base_1.WalletReadyState.Loadable) throw new wallet_adapter_base_1.WalletNotReadyError();\n        this._connecting = true;\n        let StrikeClass;\n\n        try {\n          ({\n            StrikeWallet: StrikeClass\n          } = yield Promise.resolve().then(() => __importStar(require('@strike-protocols/solana-wallet-adapter'))));\n        } catch (error) {\n          throw new wallet_adapter_base_1.WalletLoadError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n\n        let wallet;\n\n        try {\n          wallet = window.strike || new StrikeClass();\n        } catch (error) {\n          throw new wallet_adapter_base_1.WalletConfigError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n\n        let publicKey;\n\n        try {\n          publicKey = yield wallet.connect(this.url);\n        } catch (error) {\n          throw new wallet_adapter_base_1.WalletConnectionError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n\n        this._wallet = wallet;\n        this._publicKey = publicKey;\n        this.emit('connect', this._publicKey);\n      } catch (error) {\n        this.emit('error', error);\n        throw error;\n      } finally {\n        this._connecting = false;\n      }\n    });\n  }\n\n  disconnect() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const wallet = this._wallet;\n\n      if (wallet) {\n        this._wallet = null;\n        this._publicKey = null;\n\n        try {\n          if (wallet.isLoggedIn) yield wallet.cleanUp();\n        } catch (error) {\n          this.emit('error', new wallet_adapter_base_1.WalletDisconnectionError(error === null || error === void 0 ? void 0 : error.message, error));\n        }\n      }\n\n      this.emit('disconnect');\n    });\n  }\n\n  sendTransaction(transaction, connection) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const wallet = this._wallet;\n        if (!wallet) throw new wallet_adapter_base_1.WalletNotConnectedError();\n\n        try {\n          return yield wallet.sendTransaction(transaction, connection, options);\n        } catch (error) {\n          throw new wallet_adapter_base_1.WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n      } catch (error) {\n        this.emit('error', error);\n        throw error;\n      }\n    });\n  }\n\n  signTransaction(transaction) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const wallet = this._wallet;\n        if (!wallet) throw new wallet_adapter_base_1.WalletNotConnectedError();\n\n        try {\n          return yield wallet.signTransaction(transaction);\n        } catch (error) {\n          throw new wallet_adapter_base_1.WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n      } catch (error) {\n        this.emit('error', error);\n        throw error;\n      }\n    });\n  }\n\n  signAllTransactions(transactions) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const wallet = this._wallet;\n        if (!wallet) throw new wallet_adapter_base_1.WalletNotConnectedError();\n\n        try {\n          return yield wallet.signAllTransactions(transactions);\n        } catch (error) {\n          throw new wallet_adapter_base_1.WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n      } catch (error) {\n        this.emit('error', error);\n        throw error;\n      }\n    });\n  }\n\n}\n\nexports.StrikeWalletAdapter = StrikeWalletAdapter;","map":{"version":3,"mappings":"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","names":["exports","StrikeWalletAdapter","wallet_adapter_base_1","constructor","config","window","document","Unsupported","Loadable","_connecting","_wallet","_publicKey","publicKey","connecting","connected","_a","isLoggedIn","readyState","_readyState","connect","StrikeClass","StrikeWallet","error","message","wallet","strike","url","emit","disconnect","cleanUp","sendTransaction","transaction","connection","options","signTransaction","signAllTransactions","transactions"],"sourceRoot":"","sources":["../../src/adapter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}