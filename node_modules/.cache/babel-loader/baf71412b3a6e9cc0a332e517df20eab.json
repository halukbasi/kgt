{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseMessageSignerWalletAdapter = exports.BaseSignerWalletAdapter = void 0;\n\nconst adapter_1 = require(\"./adapter\");\n\nconst errors_1 = require(\"./errors\");\n\nclass BaseSignerWalletAdapter extends adapter_1.BaseWalletAdapter {\n  sendTransaction(transaction, connection) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return __awaiter(this, void 0, void 0, function* () {\n      let emit = true;\n\n      try {\n        try {\n          const {\n            signers\n          } = options,\n                sendOptions = __rest(options, [\"signers\"]);\n\n          transaction = yield this.prepareTransaction(transaction, connection, sendOptions);\n          (signers === null || signers === void 0 ? void 0 : signers.length) && transaction.partialSign(...signers);\n          transaction = yield this.signTransaction(transaction);\n          const rawTransaction = transaction.serialize();\n          return yield connection.sendRawTransaction(rawTransaction, sendOptions);\n        } catch (error) {\n          // If the error was thrown by `signTransaction`, rethrow it and don't emit a duplicate event\n          if (error instanceof errors_1.WalletSignTransactionError) {\n            emit = false;\n            throw error;\n          }\n\n          throw new errors_1.WalletSendTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n      } catch (error) {\n        if (emit) {\n          this.emit('error', error);\n        }\n\n        throw error;\n      }\n    });\n  }\n\n  signAllTransactions(transactions) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const signedTransactions = [];\n\n      for (const transaction of transactions) {\n        signedTransactions.push(yield this.signTransaction(transaction));\n      }\n\n      return signedTransactions;\n    });\n  }\n\n}\n\nexports.BaseSignerWalletAdapter = BaseSignerWalletAdapter;\n\nclass BaseMessageSignerWalletAdapter extends BaseSignerWalletAdapter {}\n\nexports.BaseMessageSignerWalletAdapter = BaseMessageSignerWalletAdapter;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;;AACA;;AASA,MAAsBA,uBAAtB,SAAsDC,2BAAtD,CAAuE;EAC7DC,eAAe,CACjBC,WADiB,EAEjBC,UAFiB,EAGmB;IAAA,IAApCC,OAAoC,uEAAF,EAAE;;MAEpC,IAAIC,IAAI,GAAG,IAAX;;MACA,IAAI;QACA,IAAI;UACA,MAAM;YAAEC;UAAF,IAA8BF,OAApC;UAAA,MAAoBG,WAAW,UAAKH,OAAL,EAAzB,WAAyB,CAA/B;;UAEAF,WAAW,GAAG,MAAM,KAAKM,kBAAL,CAAwBN,WAAxB,EAAqCC,UAArC,EAAiDI,WAAjD,CAApB;UAEA,QAAO,SAAP,WAAO,WAAP,GAAO,MAAP,UAAO,CAAEE,MAAT,KAAmBP,WAAW,CAACQ,WAAZ,CAAwB,GAAGJ,OAA3B,CAAnB;UAEAJ,WAAW,GAAG,MAAM,KAAKS,eAAL,CAAqBT,WAArB,CAApB;UAEA,MAAMU,cAAc,GAAGV,WAAW,CAACW,SAAZ,EAAvB;UAEA,OAAO,MAAMV,UAAU,CAACW,kBAAX,CAA8BF,cAA9B,EAA8CL,WAA9C,CAAb;QACH,CAZD,CAYE,OAAOQ,KAAP,EAAmB;UACjB;UACA,IAAIA,KAAK,YAAYC,mCAArB,EAAiD;YAC7CX,IAAI,GAAG,KAAP;YACA,MAAMU,KAAN;UACH;;UACD,MAAM,IAAIC,mCAAJ,CAA+BD,KAAK,SAAL,SAAK,WAAL,GAAK,MAAL,QAAK,CAAEE,OAAtC,EAA+CF,KAA/C,CAAN;QACH;MACJ,CArBD,CAqBE,OAAOA,KAAP,EAAmB;QACjB,IAAIV,IAAJ,EAAU;UACN,KAAKA,IAAL,CAAU,OAAV,EAAmBU,KAAnB;QACH;;QACD,MAAMA,KAAN;MACH;IACJ;EAAA;;EAIKG,mBAAmB,CAACC,YAAD,EAA4B;;MACjD,MAAMC,kBAAkB,GAAkB,EAA1C;;MACA,KAAK,MAAMlB,WAAX,IAA0BiB,YAA1B,EAAwC;QACpCC,kBAAkB,CAACC,IAAnB,CAAwB,MAAM,KAAKV,eAAL,CAAqBT,WAArB,CAA9B;MACH;;MACD,OAAOkB,kBAAP;IACH;EAAA;;AA5CkE;;AAAvEE;;AAqDA,MAAsBC,8BAAtB,SACYxB,uBADZ,CACmC;;AADnCuB","names":["BaseSignerWalletAdapter","adapter_1","sendTransaction","transaction","connection","options","emit","signers","sendOptions","prepareTransaction","length","partialSign","signTransaction","rawTransaction","serialize","sendRawTransaction","error","errors_1","message","signAllTransactions","transactions","signedTransactions","push","exports","BaseMessageSignerWalletAdapter"],"sourceRoot":"","sources":["../../src/signer.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}