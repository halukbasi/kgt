{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NightlyWalletAdapter = exports.NightlyWalletName = void 0;\n\nconst wallet_adapter_base_1 = require(\"@solana/wallet-adapter-base\");\n\nconst web3_js_1 = require(\"@solana/web3.js\");\n\nexports.NightlyWalletName = 'Nightly';\n\nclass NightlyWalletAdapter extends wallet_adapter_base_1.BaseSignerWalletAdapter {\n  constructor() {\n    super();\n    this.name = exports.NightlyWalletName;\n    this.url = 'https://nightly.app';\n    this.icon = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQ4IDk2Qzc0LjUwOTcgOTYgOTYgNzQuNTA5NyA5NiA0OEM5NiAyMS40OTAzIDc0LjUwOTcgMCA0OCAwQzIxLjQ5MDMgMCAwIDIxLjQ5MDMgMCA0OEMwIDc0LjUwOTcgMjEuNDkwMyA5NiA0OCA5NloiIGZpbGw9IiM2RDczRjgiLz4KPHBhdGggZD0iTTQ4IDg1LjYzNTZDNDggODUuNjM1NiA1Mi40NTMzIDg1LjYzNTYgNTUuNDQgODIuNTg2N0M1OC45MTU1IDc5LjI4MDEgNTcuMzUxMSA3NS40MzEyIDYyLjI3NTUgNzEuNDMxMkM2Ni45ODY2IDY3LjY0NDUgNzIuOTI0NCA3MC4zMzc5IDcyLjkyNDQgNzAuMzM3OUM3Ny4wMjIyIDYyLjEyNDUgNzQuNzkxMSA1Mi41NjkgNzQuNzkxMSA1Mi41NjlDODEuNzY4OCAzNC4yNTc5IDc1Ljk2NDQgMjEuMTU1NyA3NC40NDQ0IDE3LjM2MDFDNjkuNDQ4OCAyNC4zMzc5IDYzLjE5MTEgMjkuMTczNCA1NS43OTU1IDMyLjQwOUM1My4yMjY2IDMxLjcwNjggNTAuNTk1NSAzMS4zMzM0IDQ4IDMxLjM2MDFDNDUuNDEzMyAzMS4zMzM0IDQyLjc3MzMgMzEuNzA2OCA0MC4yMDQ0IDMyLjQwOUMzMi44MTc3IDI5LjE2NDUgMjYuNTUxMSAyNC4zMzc5IDIxLjU1NTUgMTcuMzYwMUMyMC4wMzU1IDIxLjE1NTcgMTQuMjMxMSAzNC4yNTc5IDIxLjIwODkgNTIuNTY5QzIxLjIwODkgNTIuNTY5IDE4Ljk3NzggNjIuMTI0NSAyMy4wNzU1IDcwLjMzNzlDMjMuMDc1NSA3MC4zMzc5IDI5LjAxMzMgNjcuNjQ0NSAzMy43MjQ0IDcxLjQzMTJDMzguNjU3NyA3NS40MzEyIDM3LjA4NDQgNzkuMjgwMSA0MC41NiA4Mi41ODY3QzQzLjU0NjYgODUuNjM1NiA0OCA4NS42MzU2IDQ4IDg1LjYzNTZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNDIuNDc5OSA2NS4yOThDNDIuMjkzMyA1OS4yMTggMzYuMzAyMSA1Ny4yNjI0IDMyLjIxMzMgNTkuODIyNEMzMi4yMTMzIDU5LjgyMjQgMzIuODUzMyA2Mi40MzU4IDM1LjgzOTkgNjMuNzUxM0MzOC4yNzU1IDY0LjgyNjkgMzkuMzI0NCA2My4zODY5IDQyLjQ3OTkgNjUuMjk4WiIgZmlsbD0iIzdCODFGOSIvPgo8cGF0aCBkPSJNMjIuNDk3NyAyMy4wOTM1QzIwLjA4ODggMzEuNTQ2OCAyMS4xMjg4IDQyLjI0MDIgMjQuOTMzMyA1MC4wMjY5QzI4LjgyNjYgNDcuMjcxMyAzMi45MTU1IDQzLjAxMzUgMzUuMDkzMyAzOC41MDY5QzI5Ljk2NDQgMzQuNzExMyAyNS42NjIyIDMxLjEwMjQgMjIuNDk3NyAyMy4wOTM1WiIgZmlsbD0iIzdCODFGOSIvPgo8cGF0aCBkPSJNNTMuNTE5OSA2NS4yOThDNTMuNzA2NiA1OS4yMTggNTkuNjk3NyA1Ny4yNjI0IDYzLjc4NjYgNTkuODIyNEM2My43ODY2IDU5LjgyMjQgNjMuMTQ2NiA2Mi40MzU4IDYwLjE1OTkgNjMuNzUxM0M1Ny43MjQzIDY0LjgyNjkgNTYuNjc1NSA2My4zODY5IDUzLjUxOTkgNjUuMjk4WiIgZmlsbD0iIzdCODFGOSIvPgo8cGF0aCBkPSJNNzMuNTAyMiAyMy4wOTM1Qzc1LjkxMTEgMzEuNTQ2OCA3NC44NzExIDQyLjI0MDIgNzEuMDY2NiA1MC4wMjY5QzY3LjE3MzMgNDcuMjcxMyA2My4wODQ0IDQzLjAxMzUgNjAuOTA2NiAzOC41MDY5QzY2LjAzNTUgMzQuNzExMyA3MC4zMzc3IDMxLjEwMjQgNzMuNTAyMiAyMy4wOTM1WiIgZmlsbD0iIzdCODFGOSIvPgo8cGF0aCBkPSJNNDcuOTk5OSA4NS4zMDY5QzUwLjE0MDQgODUuMzA2OSA1MS44NzU1IDgzLjc3ODcgNTEuODc1NSA4MS44OTM2QzUxLjg3NTUgODAuMDA4NCA1MC4xNDA0IDc4LjQ4MDIgNDcuOTk5OSA3OC40ODAyQzQ1Ljg1OTUgNzguNDgwMiA0NC4xMjQ0IDgwLjAwODQgNDQuMTI0NCA4MS44OTM2QzQ0LjEyNDQgODMuNzc4NyA0NS44NTk1IDg1LjMwNjkgNDcuOTk5OSA4NS4zMDY5WiIgZmlsbD0iIzdCODFGOSIvPgo8L3N2Zz4K';\n    this._readyState = typeof window === 'undefined' || typeof document === 'undefined' ? wallet_adapter_base_1.WalletReadyState.Unsupported : wallet_adapter_base_1.WalletReadyState.NotDetected;\n    this._connecting = false;\n    this._publicKey = null;\n    this._wallet = null;\n\n    if (this._readyState !== wallet_adapter_base_1.WalletReadyState.Unsupported) {\n      (0, wallet_adapter_base_1.scopePollingDetectionStrategy)(() => {\n        var _a;\n\n        if ((_a = window === null || window === void 0 ? void 0 : window.nightly) === null || _a === void 0 ? void 0 : _a.solana) {\n          this._readyState = wallet_adapter_base_1.WalletReadyState.Installed;\n          this.emit('readyStateChange', this._readyState);\n          return true;\n        }\n\n        return false;\n      });\n    }\n  }\n\n  get connecting() {\n    return this._connecting;\n  }\n\n  get readyState() {\n    return this._readyState;\n  }\n\n  get publicKey() {\n    return this._publicKey;\n  }\n\n  connect() {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        if (this.connected || this.connecting) return;\n        if (this._readyState !== wallet_adapter_base_1.WalletReadyState.Installed) throw new wallet_adapter_base_1.WalletNotReadyError();\n        this._connecting = true; // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n        const wallet = window.nightly.solana;\n\n        try {\n          yield wallet.connect();\n        } catch (error) {\n          throw new wallet_adapter_base_1.WalletConnectionError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n\n        if (wallet.publicKey.toString() === '11111111111111111111111111111111') throw new wallet_adapter_base_1.WalletAccountError();\n        let publicKey;\n\n        try {\n          publicKey = new web3_js_1.PublicKey(wallet.publicKey.toBytes());\n        } catch (error) {\n          throw new wallet_adapter_base_1.WalletPublicKeyError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n\n        this._wallet = wallet;\n        this._publicKey = publicKey;\n        this.emit('connect', publicKey);\n      } catch (error) {\n        this.emit('error', error);\n        throw error;\n      } finally {\n        this._connecting = false;\n      }\n    });\n  }\n\n  disconnect() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const wallet = this._wallet;\n\n      if (wallet) {\n        this._wallet = null;\n        this._publicKey = null;\n\n        try {\n          yield wallet.disconnect();\n        } catch (error) {\n          this.emit('error', new wallet_adapter_base_1.WalletDisconnectedError());\n        }\n      }\n\n      this.emit('disconnect');\n    });\n  }\n\n  signTransaction(transaction) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const wallet = this._wallet;\n        if (!wallet) throw new wallet_adapter_base_1.WalletNotConnectedError();\n\n        try {\n          return yield wallet.signTransaction(transaction);\n        } catch (error) {\n          throw new wallet_adapter_base_1.WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n      } catch (error) {\n        this.emit('error', error);\n        throw error;\n      }\n    });\n  }\n\n  signAllTransactions(transactions) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const wallet = this._wallet;\n        if (!wallet) throw new wallet_adapter_base_1.WalletNotConnectedError();\n\n        try {\n          return yield wallet.signAllTransactions(transactions);\n        } catch (error) {\n          throw new wallet_adapter_base_1.WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n      } catch (error) {\n        this.emit('error', error);\n        throw error;\n      }\n    });\n  }\n\n}\n\nexports.NightlyWalletAdapter = NightlyWalletAdapter;","map":{"version":3,"mappings":"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","names":["exports","NightlyWalletAdapter","wallet_adapter_base_1","constructor","window","document","Unsupported","NotDetected","_connecting","_publicKey","_wallet","_readyState","nightly","_a","solana","Installed","emit","connecting","readyState","publicKey","connect","connected","wallet","error","message","toString","web3_js_1","toBytes","disconnect","signTransaction","transaction","signAllTransactions","transactions"],"sourceRoot":"","sources":["../../src/adapter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}