{"ast":null,"code":"import { useEffect, useRef, useState } from 'react';\nexport function useLocalStorage(key, defaultState) {\n  const state = useState(() => {\n    try {\n      const value = localStorage.getItem(key);\n      if (value) return JSON.parse(value);\n    } catch (error) {\n      if (typeof window !== 'undefined') {\n        console.error(error);\n      }\n    }\n\n    return defaultState;\n  });\n  const value = state[0];\n  const isFirstRender = useRef(true);\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    try {\n      if (value === null) {\n        localStorage.removeItem(key);\n      } else {\n        localStorage.setItem(key, JSON.stringify(value));\n      }\n    } catch (error) {\n      if (typeof window !== 'undefined') {\n        console.error(error);\n      }\n    }\n  }, [value]);\n  return state;\n}","map":{"version":3,"mappings":"AACA,SAASA,SAAT,EAAoBC,MAApB,EAA4BC,QAA5B,QAA4C,OAA5C;AAEA,OAAM,SAAUC,eAAV,CAA6BC,GAA7B,EAA0CC,YAA1C,EAAyD;EAC3D,MAAMC,KAAK,GAAGJ,QAAQ,CAAI,MAAK;IAC3B,IAAI;MACA,MAAMK,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqBL,GAArB,CAAd;MACA,IAAIG,KAAJ,EAAW,OAAOG,IAAI,CAACC,KAAL,CAAWJ,KAAX,CAAP;IACd,CAHD,CAGE,OAAOK,KAAP,EAAc;MACZ,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;QAC/BC,OAAO,CAACF,KAAR,CAAcA,KAAd;MACH;IACJ;;IAED,OAAOP,YAAP;EACH,CAXqB,CAAtB;EAYA,MAAME,KAAK,GAAGD,KAAK,CAAC,CAAD,CAAnB;EAEA,MAAMS,aAAa,GAAGd,MAAM,CAAC,IAAD,CAA5B;EACAD,SAAS,CAAC,MAAK;IACX,IAAIe,aAAa,CAACC,OAAlB,EAA2B;MACvBD,aAAa,CAACC,OAAd,GAAwB,KAAxB;MACA;IACH;;IACD,IAAI;MACA,IAAIT,KAAK,KAAK,IAAd,EAAoB;QAChBC,YAAY,CAACS,UAAb,CAAwBb,GAAxB;MACH,CAFD,MAEO;QACHI,YAAY,CAACU,OAAb,CAAqBd,GAArB,EAA0BM,IAAI,CAACS,SAAL,CAAeZ,KAAf,CAA1B;MACH;IACJ,CAND,CAME,OAAOK,KAAP,EAAc;MACZ,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;QAC/BC,OAAO,CAACF,KAAR,CAAcA,KAAd;MACH;IACJ;EACJ,CAhBQ,EAgBN,CAACL,KAAD,CAhBM,CAAT;EAkBA,OAAOD,KAAP;AACH","names":["useEffect","useRef","useState","useLocalStorage","key","defaultState","state","value","localStorage","getItem","JSON","parse","error","window","console","isFirstRender","current","removeItem","setItem","stringify"],"sourceRoot":"","sources":["../../src/useLocalStorage.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}